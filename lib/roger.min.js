!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Roger=e():t.Roger=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.delta=e,this.deltaTime=1e3*this.delta,this.clock=0,this.clockInterval,this.toonList=[],this.debugMode=!1,this.paused=!1}var e,n,o;return e=t,(n=[{key:"init",value:function(){this.clock=0}},{key:"initWith",value:function(t){this.clock=t}},{key:"start",value:function(){var t=this;this.init(),this.clockInterval=setInterval((function(){t.paused||t.update()}),this.deltaTime)}},{key:"startWith",value:function(t){var e=this;this.init(t),this.clockInterval=setInterval((function(){e.paused||e.update()}),this.deltaTime)}},{key:"stop",value:function(){clearInterval(this.clockInterval)}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"update",value:function(){this.clock=Math.round(10*(this.clock+this.delta))/10,this.updateToons()}},{key:"updateWith",value:function(t){this.clock=t,this.updateToons()}},{key:"addToList",value:function(t){this.toonList.push(t)}},{key:"clearList",value:function(){this.toonList=[]}},{key:"setDebugMode",value:function(t){this.debugMode=t}},{key:"updateToons",value:function(){this.toonList.forEach((function(t){t.update()})),this.debugMode&&console.log(this.clock)}}])&&i(e.prototype,n),o&&i(e,o),t}();function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.spriteURL=e,this.width=n.w,this.height=n.h,this.positionX=i.x,this.positionY=i.y}var e,n,i;return e=t,(n=[{key:"url",get:function(){return this.spriteURL}},{key:"w",get:function(){return this.width}},{key:"h",get:function(){return this.height}},{key:"x",get:function(){return this.positionX}},{key:"y",get:function(){return this.positionY}}])&&r(e.prototype,n),i&&r(e,i),t}();function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(e,n,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sheetURL=e,this.width=n.w,this.height=n.h,this.rogerSprites=[],i.forEach((function(t){o.rogerSprites.push(new a(e,{w:t.w,h:t.h},{x:t.x,y:t.y}))}))}var e,n,i;return e=t,(n=[{key:"getSprite",value:function(t){return this.rogerSprites[t]}},{key:"url",get:function(){return this.sheetURL}}])&&s(e.prototype,n),i&&s(e,i),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y={FORWARD:"forward",BACKWARD:"backward",RANDOM:"random"};var m=function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.delay=e||0,this.loops="number"==typeof n?n:-1,this.direction=i||y.FORWARD,this.callback=o||null};function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g={Clock:o,Sprite:a,Sheet:u,RegularSheet:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(i,t);var e,n=(e=i,function(){var t,n=p(e);if(f()){var i=p(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return h(this,t)});function i(t,e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=[],a=0,s=0,u=Math.floor(e.w/o.w),c=Math.floor(e.h/o.h),l=0;l<c;l++){for(var h=0;h<u;h++){var f={w:o.w,h:o.h,x:a,y:s};r.push(f),a+=o.w}a=0,s+=o.h}return n.call(this,t,e,r)}return i}(u),Animation:function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(this,t),this.animName=e,this.spriteSheetUrl=n.url,this.spriteAnimation=this.getSpriteAnimation(n,i),this.options=new m(o.delay,o.loops,o.direction,o.callback),this.isFinished=!1,this.checkOptionErrors(this.options)}var e,n,i;return e=t,(n=[{key:"setOption",value:function(t){this.options=t}},{key:"getSprite",value:function(t){return this.spriteAnimation[t]}},{key:"executeCallback",value:function(){this.hasCallback&&this.options.callback()}},{key:"getSpriteAnimation",value:function(t,e){var n=[];return e.forEach((function(e){n.push(t.getSprite(e))})),n}},{key:"resetAnimation",value:function(){this.isFinished=!1,this.options.delayCounter=this.options.delay-1,this.options.loopsCounter=this.options.loops+(this.options.direction===y.BACKWARD?1:0)}},{key:"getNextFrame",value:function(t){var e,n=-1===this.options.loops,i=this.options.loopsCounter>0,o=this.spriteAnimation.length-1;return this.options.delayCounter<=0?e=this.getNextFrameByDirection(t):(this.options.delayCounter--,e=t),(e>=o+1||e<0)&&(n||i?(e=this.getNextFrameOutLimits(e,o),!n&&i&&this.options.loopsCounter--,this.options.delayCounter=this.options.delay):(e=t,this.isFinished=!0)),e}},{key:"getNextFrameByDirection",value:function(t){switch(this.options.direction){case y.FORWARD:return t+1;case y.BACKWARD:return t-1;case y.RANDOM:return Math.floor(Math.random()*this.spriteAnimation.length+0);default:return t+1}}},{key:"getNextFrameOutLimits",value:function(t,e){return t>=e?0:t<0?e:void 0}},{key:"checkOptionErrors",value:function(t){-1===t.loops&&null!==t.callback&&alert("The RogerAnimation ".concat(this.name," will never execute its callback because it has infinite loops.")),t.direction===y.random&&null!==t.callback&&alert("The RogerAnimation ".concat(this.name," will never execute its callback because RANDOM animations have infinite loops."))}},{key:"name",get:function(){return this.animName}},{key:"url",get:function(){return this.spriteSheetUrl}},{key:"hasCallback",get:function(){return!!this.options.callback}},{key:"hasFinished",get:function(){return this.isFinished}}])&&v(e.prototype,n),i&&v(e,i),t}(),AnimationOptions:m,Toon:function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.domElem=document.getElementById(e),this.animList=new Map,this.currentAnimation,this.currentFrame,this.isAnimationPlaying=!1}var e,n,i;return e=t,(n=[{key:"update",value:function(){this.isAnimationPlaying&&(this.currentFrame=this.currentAnimation.getNextFrame(this.currentFrame),this.setFrame(this.currentAnimation,this.currentFrame),this.currentAnimation.hasFinished&&(this.isAnimationPlaying=!1,this.currentAnimation.executeCallback(),this.stop(this.currentAnimation.name)))}},{key:"add",value:function(t){var e=t.name;this.animList.has(e)?alert("The RogerToon ".concat(this.id," has ALREADY an animation with the name: ").concat(e," \n Please choose another name and try it again.")):this.animList.set(e,t)}},{key:"play",value:function(t){this.isAnimationPlaying=!0,this.currentAnimation=this.animList.get(t),this.currentFrame=0,this.currentAnimation.resetAnimation()}},{key:"stop",value:function(){this.isAnimationPlaying=!1,this.currentFrame=0}},{key:"setFrame",value:function(t,e){this.currentAnimation=t,this.currentFrame=e,this.drawSprite(t.getSprite(e))}},{key:"drawSprite",value:function(t){this.domElem.style.backgroundImage!=='url("'.concat(t.url,'")')&&(this.domElem.style.backgroundImage='url("'.concat(t.url,'")')),this.domElem.style.width!==t.w+"px"&&(this.domElem.style.width=t.w+"px"),this.domElem.style.height!==t.h+"px"&&(this.domElem.style.height=t.h+"px"),this.domElem.style.backgroundPositionX!==-t.x+"px"&&(this.domElem.style.backgroundPositionX=-t.x+"px"),this.domElem.style.backgroundPositionY!==-t.y+"px"&&(this.domElem.style.backgroundPositionY=-t.y+"px")}},{key:"currentAnimationName",get:function(){return this.currentAnimation.name}}])&&b(e.prototype,n),i&&b(e,i),t}()};e.default=g}]).default}));